#!/bin/bash

# print out every command
# set -x

# Benchmark info
echo "TIMING - Starting main script at: $(date)"

################################################################################
# Environment Modules
################################################################################

# make sure module command is available
. /usr/share/Modules/init/bash

# Purge the module environment to avoid conflicts
module purge

# load pre-defined versions from the list
module load <%= context.version %>

# enable extra modules if specified
module load <%= extra_mods.to_s %>

################################################################################
################################################################################
#
# Start program
#

# Benchmark info
echo "TIMING - Starting user program at: $(date)"

# Launch CloudBeaver
echo "Starting CloudBeaver Server"
cd $CLOUDBEAVERHOME

#export JAVA_OPTS=""

${CLOUDBEAVERHOME}/run-server.sh
